[dialog5("Character Creation", "width=400; height=800; temporary=1; input=1; noframe=0"), code: {




[r:'
<style>
    body {
        background-color: #222;
        color: #fff;
        font-size: 15px;
        font-family: Calibri, sans-serif;
        position:relative;
    }

    #header{
        padding-top: 20px;
        position:relative;
        max-width:213px;
        text-align:center;
        left: 50%;
        transform: translate(-50%);
    }

    form {
        text-align:center;
        width: 213px;
        left:50%;
        margin:auto;
    }
    form p{
        text-align: left;
        margin: 3px;
        margin-top: 6px;
        font-size:105%;
        font-weight: 600;
    }

    input,select {
        width:100%;
        border: 1px solid black;
        border-radius: 5px;
        margin: 1px;
        padding: 6px;
    }
    select {
        background: none;
        -webkit-appearance: none;
        background-color: white;
        font: inherit;
        font-size: 90%;
    }
    input:focus, select:focus {
        border: 1px solid #7cd;
        outline:none;
    }

    #submitButton {
        position:absolute;
        bottom:10px;
        left:50%;
        transform:translate(-50%)
    }
    .hidden {
        display:none;
    }

    button {
        padding: 5px 8px;
        font-size: 14px;
        background-color: #444;
        border: 1px solid #666;
        border-radius: 5px;
        color: #f1f1f1;
        cursor: pointer;
        transition: background-color 0.2s;
    }

    button:hover {
        background-color: #555;
    }

    button:active {
        background-color: #666;
    }
</style>
']




<div class="hidden">
    <a id="sendData"></a>
    <a id="closeWindow" href="macro://closeDialog@lib:main/all/Impersonated?%5B%22Character+Creation%22%5D"></a>
</div>
<p id="header">Basic character information</p>
<form>
    <input type="text" class="hidden" id="id" value="{getSelected()}"></input>
    <p>Name:</p><input type="text" id="name" placeholder></input>
    <p>Type:</p><select id="type">
        <option value="" hidden>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </option>
        <option>Aberration</option>
        <option>Beast</option>
        <option>Celestial</option>
        <option>Construct</option>
        <option>Dragon</option>
        <option>Elemental</option>
        <option>Fey</option>
        <option>Fiend</option>
        <option>Giant</option>
        <option>Humanoid</option>
        <option>Monstrosity</option>
        <option>Ooze</option>
        <option>Plant</option>
        <option>Undead</option>
    </select>
    <div id="race-div" style="display:none">
    <p>Race:</p><select id="race">
        <option value="" hidden>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </option>
        <option>Dragonborn</option>
        <option>Dwarf</option>
        <option>Elf</option>
        <option>Gnome</option>
        <option>Half-Elf</option>
        <option>Half-Orc</option>
        <option>Halfling</option>
        <option>Human</option>
    </select>
    </div>
    <p id="header">Ability Scores</p>
    <button id="submitButton">Concluir</button>
</form>




[r:'
<script>
    let sendData = document.getElementById("sendData")
    let closeWindow = document.getElementById("closeWindow")

    function updateSubmit() {
        sendData.setAttribute("href", "macro://console@lib:main/all/impersonated?"+
            "var creature = new Creature(`"+id.value+"`);"+
            "creature.reset(`"+name.value+"`,`"+type.value+"`,`"+race.value+"`)"
        )
    }

    let id = document.getElementById("id")
    let name = document.getElementById("name")
    let type = document.getElementById("type")
    let race = document.getElementById("race")

    name.addEventListener("input", updateSubmit)
    type.addEventListener("input", ()=>{
        let race_div = document.getElementById("race-div")
        if (type.value == "Humanoid") {race_div.setAttribute("style","")}
        else {race.value = ""; race_div.setAttribute("style","display:none")}
    })
    race.addEventListener("input", updateSubmit)

    document.getElementById("submitButton").addEventListener("click", ()=>{

        let valid = true

        if (name.value == "") { valid = false
            name.setAttribute("style", "border-color:#c00")
        } else { name.setAttribute("style", "") }

        if (type.value == "") { valid = false
            type.setAttribute("style", "border-color:#c00")
        } else { type.setAttribute("style", "") }

        if (race.value == "" && type.value == "Humanoid") { valid = false
            race.setAttribute("style", "border-color:#c00")
        } else { race.setAttribute("style", "") }

        if (valid==false) {return}

        sendData.click()
        closeWindow.click()
    })

</script>
']




}]