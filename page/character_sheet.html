[dialog5("Character Sheet",  "width=350; height=700; temporary=1; input=1; noframe=0"), code: {
<head>

[r:'
<style>

::-webkit-scrollbar {
  width: 7px;
}

::-webkit-scrollbar-track {
  background: rgba(0,0,0,0);
}

::-webkit-scrollbar-corner {
	visibility:hidden;
}
 
::-webkit-scrollbar-thumb {
  background: #666;
  border-radius:5px;
}

::-webkit-scrollbar-thumb:hover {
  background: #999;
  border-radius:5px;
}

.stats-container {
    display: block;
    text-align: center;
    width: 80%;
}

.row {
    display: flex;
    justify-content: center;
    gap: 20px; /* Space between columns */
    margin-bottom: 10px; /* Space between rows */
}

.stat, .value {
    width: 50px; /* Adjust width as needed */
    text-align: center;
    color: #999;
    font-size: 120%;
    font-weight: bold;
}

.value {
    font-size: 150%;
    color: #ddd;
}

body {

    position: relative;
    overflow: hidden;
    padding: 0px;
    margin: 0px;

    background: #333;
    color: #ddd;
    font-size: 12px;
}
h1,h2,h3,h4,h5,h6,p {
    text-align:center;
}
div {
}
div.spacer {
    height: 10px;
    padding: 0px;
    margin: 0px;

    border: none;
}

.center {
    position: relative;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
.center-horizontal {
    position: relative;
    left: 50%;
    transform: translate(-50%);
}
.hidden {
    display:none;
}
.subtext {
    position: relative;
    top: 5px;

    color: #999;
}
.outer {

    height: 97%;
    width: 95%;
    overflow-y: scroll;

    background-color: #292929;
    border: 1px solid #444;
    border-radius: 10px;
    text-align: center;

}



</style>
<script>

    //=====================================================================================================
    // Execution
    //=====================================================================================================

    function onWindowLoad() {

        animateAccordion()
        updateFields(); setInterval(()=>{updateFields()}, 500)
        
    }



    //=====================================================================================================
    // Helper functions
    //=====================================================================================================

    function updateFields() {
        loadCurrentFieldInnerHTML("name","creature.name")
        loadCurrentFieldInnerHTML("type","creature.type")
        loadCurrentFieldInnerHTML("race","creature.race")

        loadCurrentFieldInnerHTML("str", "creature.attributes.strength");
        loadCurrentFieldInnerHTML("dex", "creature.attributes.dexterity");
        loadCurrentFieldInnerHTML("con", "creature.attributes.constitution");
        loadCurrentFieldInnerHTML("int", "creature.attributes.intelligence");
        loadCurrentFieldInnerHTML("wis", "creature.attributes.wisdom");
        loadCurrentFieldInnerHTML("cha", "creature.attributes.charisma");

        loadCurrentFieldInnerHTML("conditions", "");
        loadCurrentFieldInnerHTML("resistances", "creature.resitances");
        loadCurrentFieldInnerHTML("features", "creature.features.all");


    }

    function getId(id) {return document.getElementById(id)}

    function updateRaceVisibility() {
        let type = getId("type")
        let race = getId("race-div")

        if (type.value == "Humanoid") {
            race.setAttribute("style", "display: block")}
        else {
            race.setAttribute("style", "display: none")}
    }

    function loadCurrentFieldInnerHTML(fieldId, request) {
        let id = getId("id")
        if (!getId(fieldId)) {return}

        toBackend("var creature = new Creature(`"+id.value+"`);"+request,
            (response) => {
                getId(fieldId).innerHTML = response
                updateRaceVisibility()
            })
    }



    //=====================================================================================================
    // Style functions
    //=====================================================================================================

    function animateAccordion() {
        var acc = document.getElementsByClassName("accordion");
        var i;

        for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
            panel.style.maxHeight = null;
            } else {
            panel.style.maxHeight = panel.scrollHeight + "px";
            } 
        });
        }
    }



    //=====================================================================================================
    // External functions
    //=====================================================================================================

    function toBackend(arguments, valueCallback) {
        let request = new XMLHttpRequest();
        request.open("POST", "macro:console@lib:main", true);

        request.onreadystatechange = function() {
            if (request.readyState == 4) {
                valueCallback(request.response);
            }
        };
        request.send(arguments);
    }

    function closeDialog(arguments) {
        let request = new XMLHttpRequest();
        request.open("POST", "macro:closeDialog@lib:main", true);

        request.onreadystatechange = function() {
            if (request.readyState == 4) {
                valueCallback(request.response);
            }
        };
        request.send(arguments);
    }
    


    //=====================================================================================================

    document.addEventListener("DOMContentLoaded", onWindowLoad)

</script>
']
</head>

<input type="text" class="hidden" id="id" value="{getSelected()}"></input>

<body>
    <div class="outer center">
        
        <div class="spacer"></div>

        <h2 id="name"></h2>
        <img src="{getTokenPortrait()}" height="108px" style="
            border-radius: 108px;
            border: 2px solid #888;
        ">
        <h3 class="subtext" id="level">3rd Level</h3>
        <h2><span id="race">Human</span> <span id="class">Wizard</span></h2>

        <div class="spacer"></div>

        <div class="stats-container center-horizontal">
            <div class="row">
                <div class="stat">STR</div>
                <div class="stat">DEX</div>
                <div class="stat">CON</div>
                <div class="stat">INT</div>
                <div class="stat">WIS</div>
                <div class="stat">CHA</div>
            </div>
            <div class="row">
                <div class="value" id="str">12</div>
                <div class="value" id="dex">14</div>
                <div class="value" id="con">13</div>
                <div class="value" id="wis">10</div>
                <div class="value" id="int">8</div>
                <div class="value" id="cha">15</div>
            </div>
        </div>

        <div class="spacer"></div>

        <h3>Conditions</h3>
        <p id="conditions"></p>

        <div class="spacer"></div>

        <h3>Resistances</h3>
        <p id="resistances"></p>

        <div class="spacer"></div>

        <h3>Features</h3>
        <p id="features"></p>
    </div>
</body>

}]