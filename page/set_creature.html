[dialog5("Character Creation", "width=400; height=800; temporary=1; input=1; noframe=0"), code: {
<head>

[r:'
<style>

::-webkit-scrollbar {
    width: 7px;
}

::-webkit-scrollbar-track {
    background: rgba(0,0,0,0);
}

::-webkit-scrollbar-corner {
    visibility:hidden;
}
    
::-webkit-scrollbar-thumb {
    background: #666;
    border-radius:5px;
}

::-webkit-scrollbar-thumb:hover {
    background: #999;
    border-radius:5px;
}

.stats-container {
    display: block;
    text-align: center;
    width: 80%;
}

.row {
    display: flex;
    justify-content: center;
    gap: 20px; /* Space between columns */
    margin-bottom: 10px; /* Space between rows */
}

.stat, .value {
    width: 50px; /* Adjust width as needed */
    text-align: center;
    color: #999;
    font-size: 120%;
    font-weight: bold;
}

.value {
    font-size: 150%;
    color: #ddd;
}

body {

    position: relative;
    overflow: hidden;
    padding: 0px;
    margin: 0px;

    background: #333;
    color: #ddd;
    font-size: 12px;
}
h1,h2,h3,h4,h5,h6,p {
    text-align:center;
}
div {
    
}
div.spacer {
    height: 10px;
    padding: 0px;
    margin: 0px;

    border: none;
}

.center {
    position: relative;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
.center-horizontal {
    position: relative;
    left: 50%;
    transform: translate(-50%);
}
.hidden {
    display:none;
}
.subtext {
    position: relative;
    top: 5px;

    color: #999;
}
.outer {

    height: 97%;
    width: 95%;
    overflow-y: scroll;

    background-color: #292929;
    border: 1px solid #444;
    border-radius: 10px;
    text-align: center;

}
.input {
    background-color: #333;
    border: 1px solid #444;
    border-radius: 5px;
    width: fit-content;
    padding: 25px;
    padding-top: 0px;
    margin: 15px 0px;
}
input, select{
    -webkit-appearance: none;
    width:250px;

    background-color: white;
    border: 1px solid #444;
    border-radius: 5px;

    padding:5px;
}
input:focus, select:focus{
    outline: none;
}

.score-container {
    display: grid;
    grid-template-columns: repeat(3, 100px);  /* Adjust to fit within 450px */
    gap: 5px;
    grid-template-rows: repeat(2, 140px);
    width: fit-content; /* Set the width to 450px */
    margin: 0 auto; /* Automatically center horizontally */
    justify-items: center; /* Ensure items in the grid are centered horizontally */
    align-items: center; /* Ensure items in the grid are centered vertically */
}

.score {
    background-color: #333;
    width: 80px;
    border: 1px solid #444;
    border-radius: 5px;
    padding: 5px;
    text-align: center;
    height: 120px;  /* Control the height for consistency */
}

.label {
    font-size: 110%; /* Smaller font size */
    font-weight: bold;
}

.score-value {
    font-size: 34px; /* Adjusted for a smaller look */
    font-weight: bold;
    margin: 10px;
    margin-top: 20px;
}

button {
    width: 20px;
    height: 20px;
    font-size: 13px;
    font-weight: bold;
    margin: 5px;
    margin-top: 10px;
    padding: 0px;
    cursor: pointer;
    border: none;
    background-color: #666;
    color: white;
    border-radius: 5px;
}

button:hover {
    background-color: #777;
}

button:active {
    background-color: #555;
}

#submit {
    background-color: #333;
    width:fit-content;
    height:fit-content;
    padding: 10px;
}

#submit:hover {
    background-color: #444;
}

#submit:active {
    background-color: #333;
}



</style>
<script>

    //=====================================================================================================
    // Execution
    //=====================================================================================================

    function onWindowLoad() {

        let id = getId("id")

        loadCurrentFieldValue("name", "creature.name")
        loadCurrentFieldValue("type", "creature.type")
        loadCurrentFieldValue("race", "creature.race")

        getId("submit").addEventListener("click", async () => {

            // Get values from form
            let name = getId("name");
            let type = getId("type");
            let race = getId("race");

            // Get attribute values from form
            let str = getId("strength");
            let dex = getId("dexterity");
            let con = getId("constitution");
            let wis = getId("wisdom");
            let int = getId("intelligence");
            let cha = getId("charisma");

            // Check if form is valid
            let valid = true
            if (name.value == "") {valid = false}
            if (type.value == "") {valid = false}
            if (race.value == "" && type.value == "Humanoid") {valid = false}
            if (valid == false) {return}

            let race_value = race.value
            if(race_value == "") {race_value = type.value}

            // Send data to backend
            toBackend(
                "var creature = new Creature(`"+id.value+"`, true);"+
                "creature.create("+
                    "`"+name.value+"`,"+
                    "`"+type.value+"`,"+
                    "`"+race_value+"`,"+
                    "`"+str.innerHTML+"`,"+
                    "`"+dex.innerHTML+"`,"+
                    "`"+con.innerHTML+"`,"+
                    "`"+wis.innerHTML+"`,"+
                    "`"+int.innerHTML+"`,"+
                    "`"+cha.innerHTML+"`,"+
                ")"
            )

            // Close page
            closeDialog("Character Creation")

        })

        getId("type").addEventListener("input", () => {
            updateRaceVisibility()
        })
    }



    //=====================================================================================================
    // Helper functions
    //=====================================================================================================

    function getId(id) {return document.getElementById(id)}

    function updateRaceVisibility() {
        let type = getId("type")
        let race = getId("race-div")

        if (type.value == "Humanoid") {
            race.setAttribute("style", "display: block")}
        else {
            race.setAttribute("style", "display: none")}
    }

    function loadCurrentFieldValue(fieldId, request) {
        let id = getId("id")

        toBackend("var creature = new Creature(`"+id.value+"`);"+request,
            (response) => {
                getId(fieldId).value = response
                updateRaceVisibility()
            })
    }



    //=====================================================================================================
    // External functions
    //=====================================================================================================

    function toBackend(arguments, valueCallback) {
        let request = new XMLHttpRequest();
        request.open("POST", "macro:console@lib:main", true);

        request.onreadystatechange = function() {
            if (request.readyState == 4) {
                valueCallback(request.response);
            }
        };
        request.send(arguments);
    }

    function closeDialog(arguments) {
        let request = new XMLHttpRequest();
        request.open("POST", "macro:closeDialog@lib:main", true);

        request.onreadystatechange = function() {
            if (request.readyState == 4) {
                valueCallback(request.response);
            }
        };
        request.send(arguments);
    }
    


    //=====================================================================================================

    document.addEventListener("DOMContentLoaded", onWindowLoad)

</script>
']
</head>

<input type="text" class="hidden" id="id" value="{getSelected()}"></input>

<body>
    <div class="outer center">

        <div class="spacer"></div>

        <div class="input center-horizontal">
            <h3>Name</h3>
            <input type="text" id="name" placeholder></input>
        </div>
        <div class="input center-horizontal">
            <h3>Type</h3>
            <select id="type">
                <option value="" hidden>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                </option>
                <option>Aberration</option>
                <option>Beast</option>
                <option>Celestial</option>
                <option>Construct</option>
                <option>Dragon</option>
                <option>Elemental</option>
                <option>Fey</option>
                <option>Fiend</option>
                <option>Giant</option>
                <option>Humanoid</option>
                <option>Monstrosity</option>
                <option>Ooze</option>
                <option>Plant</option>
                <option>Undead</option>
            </select>
        </div>
        <div id="race-div" class="input center-horizontal">
            <h3>Race</h3>
            <select id="race">
                <option value="" hidden>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                </option>
                <option>Hill Dwarf</option>
                <option>Mountain Dwarf</option>
                <option>High Elf</option>
                <option>Wood Elf</option>
                <option>Drow</option>
                <option>Lightfoot Halfling</option>
                <option>Stout Halfling</option>
                <option>Half-Orc</option>
                <option>Human</option>
                <option>Half-Elf</option>
                <option>Rock Gnome</option>
                <option>Forest Gnome</option>
            </select>
        </div>

        <div class="spacer"></div>

        <div class="score-container">
            <div class="score">
                <div class="label">Strength</div>
                <div class="score-value" id="strength">10</div>
                <button class="decrease" onclick="adjustScore('strength', -1)">-</button>
                <button class="increase" onclick="adjustScore('strength', 1)">+</button>
            </div>
            <div class="score">
                <div class="label">Dexterity</div>
                <div class="score-value" id="dexterity">10</div>
                <button class="decrease" onclick="adjustScore('dexterity', -1)">-</button>
                <button class="increase" onclick="adjustScore('dexterity', 1)">+</button>
            </div>
            <div class="score">
                <div class="label">Constitution</div>
                <div class="score-value" id="constitution">10</div>
                <button class="decrease" onclick="adjustScore('constitution', -1)">-</button>
                <button class="increase" onclick="adjustScore('constitution', 1)">+</button>
            </div>
            <div class="score">
                <div class="label">Wisdom</div>
                <div class="score-value" id="wisdom">10</div>
                <button class="decrease" onclick="adjustScore('wisdom', -1)">-</button>
                <button class="increase" onclick="adjustScore('wisdom', 1)">+</button>
            </div>
            <div class="score">
                <div class="label">Intelligence</div>
                <div class="score-value" id="intelligence">10</div>
                <button class="decrease" onclick="adjustScore('intelligence', -1)">-</button>
                <button class="increase" onclick="adjustScore('intelligence', 1)">+</button>
            </div>
            <div class="score">
                <div class="label">Charisma</div>
                <div class="score-value" id="charisma">10</div>
                <button class="decrease" onclick="adjustScore('charisma', -1)">-</button>
                <button class="increase" onclick="adjustScore('charisma', 1)">+</button>
            </div>
        </div>

        <div class="spacer"></div>

        <button id="submit">Submit</button>
    </div>
</body>

}]