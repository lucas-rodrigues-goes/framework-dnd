[h:id = getImpersonated()]

[overlay("Screen"), code: {
<head>
<link rel='onChangeImpersonated' type='macro' href='macro://screen.html@lib:main/all/impersonated?'>
[r:style()]
[r:script()]
[r:'
<style>
    body {
        all:unset;
    }
    .bottom-center {
        width: 400px;
        height: 50px;
        position:fixed;
        bottom: 10px;
        left:50%;
        transform: translate(-50%);
        text-align:center;
    }
    button {
        width:40px;height:40px;
        text-align:center;
        padding: 10px;
        border-width: 2px;
        background-color: #333;
        color:#ddd;
        cursor:default;
    }
    button:hover, button:active {
        color: #333;
        cursor:default;
    }





</style>
<script>

    //=====================================================================================================
    // Execution
    //=====================================================================================================

    function onWindowLoad() {

        updateFields(); setInterval(()=>{updateFields()}, 500)

        getId("info").addEventListener("click",()=>{
            openClosePage(getId("id").value , "Character", "creature_info.html")
        })

        updateHealth(75)

        let keysPressed = {};

        document.addEventListener("keydown", (event) => {
            keysPressed[event.key] = true;
            console.log(keysPresseds)
            
        });
        document.addEventListener("keyup", (event) => {
            delete keysPressed[event.key];
            console.log(keysPresseds)
        });

    }



    //=====================================================================================================

    document.addEventListener("DOMContentLoaded", onWindowLoad)

</script>
']
</head>

<input type="text" class="hidden" id="id" value="{id}"></input>

<body>

    
    <div class="top-left" style="margin: 30px">
        <img src="{getTokenPortrait(108,id)}" height="108px" style="
        border-radius: 108px;
        border: 2px solid #888;
    ">
    <br>
    <button id="info" style="margin-top: 30px; margin-left: 37px">C</button>
    </div>
    <div class="bottom-center">
        
    </div>

</body>

}]