[dialog5("Feature", "width=400; height=800; temporary=1; input=1; noframe=0"), code: {
<head>
[r:style()]
[r:script()]
[r:'
<style>
</style>
<script>

    //=====================================================================================================
    // Execution
    //=====================================================================================================

    function onWindowLoad() {

        getId("cancel").addEventListener("click", () => {
            closePage("Feature")
        })

        addSubmitBehavior()
    }



    //=====================================================================================================
    // Helper functions
    //=====================================================================================================

    function updateFields() {
        id = getId("id").value

        if(id == "") {return}

        toBackend("database.features.data", (response) => {
            response = JSON.parse(response)
            
            getId("name").value = capitalize(response[id].name)
            getId("type").value = capitalize(response[id].type)
            getId("subtype").value = capitalize(response[id].subtype)
            getId("level").value = capitalize(response[id].level)
            getId("description").value = response[id].description

            if(response[id].image) {
                getId("image").value = response[id].image
            }
        })
    }

    function addSubmitBehavior() {
        getId("submit").addEventListener("click", async () => {
            console.log("here")
            // Get values from form
            let name = getId("name").value;

            console.log("here2")
            // Treatment
            if (level == "Cantrip") {level = "cantrip"}
            school = school.toLowerCase()

            console.log("here3")
            // Send data to backend
            toBackend(
                "database.set_feature("+
                    "`"+name+"`,"+
                    "`"+name+"`,"+
                    "`"+name+"`,"+
                    "`"+name+"`,"+
                    "`"+name+"`,"+
                ")"
            )

            console.log("here4")

            closePage("spell.html")

        })
    }



    //=====================================================================================================

    document.addEventListener("DOMContentLoaded", onWindowLoad)

</script>
']
</head>

<body>
    <div class="outer">

        <h2>Feature Creation</h2>

        <div class="spacer"></div>

        <div class="container center-horizontal" style="padding-bottom:0px;">
            <h3 class="container-title">Information</h3>

            <div class="spacer" ></div>

            <h4>Name</h4>
            <input id="name" placeholder></input>

            <h4>Type</h4>
            <select id="school">
                <option value="" hidden>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                </option>
                <option>Racial</option>
                <option>Class</option>
                <option>Feat</option>
            </select>

            <h4>Subtype</h4>
            <select id="school">
                <option value="" hidden>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                </option>
                <option>Barbarian</option>
                <option>Bard</option>
                <option>Cleric</option>
            </select>

            <h4>Level</h4>
            <select id="level">
                <option value="" hidden>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                </option>
                <option>0</option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
                <option>9</option>
                <option>10</option>
                <option>11</option>
                <option>12</option>
                <option>13</option>
                <option>14</option>
                <option>15</option>
                <option>16</option>
                <option>17</option>
                <option>18</option>
                <option>19</option>
                <option>20</option>
            </select>


            <h4>Optional</h4>
            <div class="checkmark">
                
            </div>

            <h4>Description</h4>
            <textarea id="description" rows="10" cols="30"></textarea>

        </div>

        <button id="cancel">Cancel</button>
        <button id="submit">Accept</button>

    </div>
</body>

}]