[dialog5("Spell", "width=400; height=800; temporary=1; input=1; noframe=0"), code: {
<head>
[r:style()]
[r:script()]
[r:'
<style>

.outer {
    height: 95.5%;
}

</style>
<script>

    //=====================================================================================================
    // Execution
    //=====================================================================================================

    function onWindowLoad() {

        getId("cancel").addEventListener("click", () => {
            closePage("Spell")
        })

        addSubmitBehavior()
    }



    //=====================================================================================================
    // Helper functions
    //=====================================================================================================

    function addSubmitBehavior() {
        getId("submit").addEventListener("click", async () => {

            // Get values from form
            let name = getId("name").value;
            let level = getId("level").value;
            let school = getId("school").value;
            let classes = "";
            let cast_time = getId("cast_time").value;
            let range = getId("range").value;
            let target = getId("target").value;
            let components = "";
            let duration = getId("duration").value;
            let description = getId("description").value;
            let description_higher_levels = getId("description_higher_levels").value;

            // Treatment
            if (level == "Cantrip") {level = "cantrip"}
            school = school.toLowerCase()

            // Send data to backend
            toBackend(
                "database.set_spell("+
                    "`"+name+"`,"+
                    "`"+level+"`,"+
                    "`"+school+"`,"+
                    "`"+classes+"`,"+
                    "`"+cast_time+"`,"+
                    "`"+range+"`,"+
                    "`"+target+"`,"+
                    "`"+components+"`,"+
                    "`"+duration+"`,"+
                    "`"+description+"`,"+
                    "`"+description_higher_levels+"`,"+
                ")"
            )

            closePage("spell.html")

        })
    }



    //=====================================================================================================

    document.addEventListener("DOMContentLoaded", onWindowLoad)

</script>
']
</head>

<body>
    <div class="outer">

        <h2>Spell Creation</h2>

        <div class="spacer"></div>

        <div class="container center-horizontal" style="padding-bottom:0px;">
            <h3 class="container-title">Information</h3>

            <div class="spacer" ></div>

            <h4>Name</h4>
            <input id="name" placeholder></input>

            <h4>Level</h4>
            <select id="level">
                <option value="" hidden>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                </option>
                <option>Cantrip</option>
                <option>1st</option>
                <option>2nd</option>
                <option>3rd</option>
                <option>4th</option>
                <option>5th</option>
                <option>6th</option>
                <option>7th</option>
                <option>8th</option>
                <option>9th</option>
            </select>

            <h4>School</h4>
            <select id="school">
                <option value="" hidden>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                </option>
                <option>Abjuration</option>
                <option>Conjuration</option>
                <option>Divination</option>
                <option>Enchantment</option>
                <option>Evocation</option>
                <option>Illusion</option>
                <option>Necromancy</option>
                <option>Transmutation</option>
            </select>

            <h4>Cast Time</h4>
            <input id="cast_time"></input>

            <h4>Range</h4>
            <input id="range"></input>

            <h4>Target</h4>
            <input id="target"></input>

            <h4>Duration</h4>
            <input id="duration"></input>

            <h4>Description</h4>
            <textarea id="description" rows="10" cols="30"></textarea>

            <h4>At Higher Levels</h4>
            <textarea id="description_higher_levels" rows="3" cols="30"></textarea>

        </div>

        <button id="cancel">Cancel</button>
        <button id="submit">Accept</button>

    </div>
</body>

}]